<tmpl_include header.tmpl>

<script type="text/javascript">
Krang.onload( function() {
  Krang.Help.set( 'alert' );
} );

<tmpl_if alert_loop>
  delete_checked = function()
  {
    if ( !Krang.row_checked( 'current_alert_form', 'alert_delete_list' ) )
      alert( 'Nothing selected to delete!' );
    else if ( confirm( 'Are you SURE you wish to delete these Alerts?' ) )
      Krang.form_submit( 'current_alert_form', {}, { to_top: false } );
  }
</tmpl_if>
</script>

<h2>
Alerts
</h2>

<tmpl_if alert_loop>

  <form name="current_alert_form" method="post" action="my_alerts.pl">

  <input name="rm" value="delete_alerts" type="hidden">

  <h3>
  Current Alerts
  </h3>

  <table class="list select_row" summary="">

  <colgroup>
  <col class="c-deed">
  <col>
  <col>
  <col class="tick">
  </colgroup>

  <thead>
  <tr>
  <th>Action</th>
  <th>Site/Category</th>
  <th>Desk</th>
  <th class="tick"><input name="checkallbox" value="1" onclick="Krang.check_all(this,'alert_delete_list')" type="checkbox"></th>
  </tr>
  </thead>

  <tbody><tmpl_loop alert_loop>
    <tr>
    <td><tmpl_var escape=html action></td>
    <td><tmpl_if category><tmpl_var escape=html category><tmpl_else>Any</tmpl_if></td>
    <td><tmpl_if desk><tmpl_var escape=html desk><tmpl_else>Any</tmpl_if></td>
    <td class="tick"><input name="alert_delete_list" value="<tmpl_var escape=html alert_id>" type="checkbox"></td>
    </tr>
  </tmpl_loop></tbody>

  </table>

  <div class="panel">
  <input value="Delete" onclick="delete_checked()" type="button">
  </div>

  </form>

</tmpl_if>

<form name="add_alert_form" method="post" action="my_alerts.pl">

<input name="rm" value="add" type="hidden">

<h3>
Create a New Alert
</h3>

<table class="half" summary="">

<colgroup>
<col class="c-label">
<col>
</colgroup>

<tr>
<th>*Action</th>
<td><tmpl_var action_selector></td>
</tr>

<tr>
<th>Site/Category</th>
<td><tmpl_var category_chooser></td>
</tr>

<tr class="last">
<th>Desk</th>
<td><tmpl_var desk_selector></td>
</tr>

</table>

<div class="panel">
<input value="Add Alert" type="submit">
</div>

</form>

<tmpl_include footer.tmpl>

